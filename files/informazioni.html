<!DOCTYPE html>
<html>
    <head>
        <title>Informazioni</title>
        <link href="style.css" rel="stylesheet" type="text/css" />
        <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <script>
            $(document).ready(function() {
                $('.prenotazione #hour').change(function() {
                    attiva_prenotazione();
                });
                $('.prenotazione #day').change(function() {
                    attiva_prenotazione();
                });
                setInterval(function() {
                    aggiorna_larghezza_massima();
                    aggiorna_altezza_massima();
                }, 50);
            });
            function aggiorna_larghezza_massima() {
                w_popup = $('#informazioni').width();
                w_img = $('#informazioni > img').width();
                p_info = $('#informazioni .info').css('padding-left');
                p_info = p_info.substring(0,p_info.length-2);
                w = w_popup-w_img-(p_info*2);
                $('#trama').css('max-width', w+'px');
            }
            function aggiorna_altezza_massima() {
                h_popup = $('#informazioni').height();
                h = h_popup-60-50-$('#informazioni .info > span').height();
                $('#trama').css('max-height', h+"px");
                if($('#trama').height()+5 >= h) {
                    $('#trama').css({'border-top': '1px solid rgba(0,0,0,0.2)', 'border-bottom': '1px solid rgba(0,0,0,0.2)'});
                }else{
                    $('#trama').css({'border-top': '0px', 'border-bottom': '0px'});
                }
            }
            function attiva_prenotazione(){
                var giorno = $('.prenotazione #day').val();
                var ora = $('.prenotazione #hour').val();
                if(giorno != null && ora!= null){
                    $('.prenotazione input[type="submit"]').removeAttr("disabled");
                }
            }
        </script>
    </head>
    <body>
        <div class="popup" id="informazioni">
            <a href="index.html" class="close"></a>
            <img src="film/1/locandina.jpg" />
            <div class="info">
                <span style="display: block;">
                    <h1>Thor Ragnarok</h1>
                    <h2>
                        <span class="genere">Azione</span>
                        <span class="durata">121'</span>
                        <span class="valutazione">3.5</span>
                    </h2>
                </span>
                <span id="trama">
                    Mosso dalla ritrovata fede nel genere umano e ispirato dalle gesta altruistiche di Superman, Bruce Wayne chiede l'aiuto dell'alleata Diana Prince per affrontare un acerrimo nemico da poco risvegliato. Insieme, Batman e Wonder Woman lavorano alacremente per trovare e reclutare i componenti di una squadra di metaumani. Nonostante la formazione di un team senza precedenti di eroi, potrebbe essere tardi per salvare il pianeta Terra da un attacco di catastrofiche proporzioni.
                </span>
            </div>
            <form action="posti.html" class="prenotazione">
                <select id="day">
                    <option selected disabled>Scegli un giorno..</option>
                    <option value="051217">5 dicembre 2017</option>
                    <option value="061217">6 dicembre 2017</option>
                    <option value="071217">7 dicembre 2017</option>
                    <option value="081217">8 dicembre 2017</option>
                    <option value="091217">9 dicembre 2017</option>
                    <option value="101217">10 dicembre 2017</option>
                    <option value="111217">11 dicembre 2017</option>
                </select>
                <select id="hour">
                    <option selected disabled>Scegli un orario..</option>
                    <option value="16:00">16:00</option>
                    <option value="18:00">18:00</option>
                    <option value="20:00">20:00</option>
                    <option value="22:00">22:00</option>
                    <option value="00:00">00:00</option>
                </select>
                <input type="submit" value="Prenota" disabled />
            </form>
        </div>
    </body>
</html>
